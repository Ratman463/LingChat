# UNO卡牌游戏

## 游戏简介

基于LLM的UNO卡牌游戏，具有精美的UI设计和完整的游戏逻辑。

## 游戏规则

- 每位玩家初始获得7张牌
- 玩家必须出与弃牌堆顶牌相同颜色或相同数字的牌
- 万能牌（Wild）可以在任何时候出，并选择新颜色
- 特殊卡牌效果：
  - **+2牌**: 下一位玩家抽2张牌并跳过回合
  - **+4牌**: 下一位玩家抽4张牌并跳过回合
  - **跳过牌(Skip)**: 跳过下一位玩家的回合
  - **反转牌(Stop)**: 反转游戏方向
- 首先出完所有卡牌的玩家获胜

## 游戏界面

### 界面区域

1. **AI卡牌区** (顶部)
   - 显示AI玩家的卡牌数量
   - AI的卡牌以卡背形式显示

2. **中央游戏区** (中间)
   - **抽牌堆**: 点击从牌堆抽取一张牌
   - **弃牌堆**: 显示当前的顶牌
   - **游戏状态**: 显示当前回合和颜色

3. **玩家卡牌区** (底部)
   - 显示玩家手中的所有卡牌
   - 可以出的牌会有高亮效果
   - 点击选中卡牌，再点击"出牌"按钮

## 技术实现

### 组件结构

```
UnoGame.vue (主游戏组件)
├── 游戏状态管理 (ref)
├── 卡牌逻辑
│   ├── initializeDeck() - 初始化牌堆
│   ├── shuffle() - 洗牌
│   └── isCardPlayable() - 判断卡牌是否可出
├── 游戏流程
│   ├── startGame() - 开始游戏
│   ├── playCard() - 出牌
│   ├── handleDrawCard() - 抽牌
│   ├── parseAIResponse() - LLM消息转换为操作信息
│   └── aiPlay() - AI回合
└── LLM交互
    └── scriptHandler.sendMessage() - 发送游戏信息给LLM
```

### LLM交互

游戏通过 `scriptHandler.sendMessage()` 与LLM通信：

1. **游戏开始**: 发送初始游戏状态
2. **玩家出牌**: 发送出牌信息
3. **AI出牌**: 发送AI的出牌决策

### 卡牌资源

所有卡牌图片位于：`frontend_vue/public/pictures/games/uno/`

卡牌命名规则：

- 数字牌: `{color}_{number}.png` (例如: red_5.png)
- 特殊牌: `{color}_{action}.png` (例如: blue_skip.png)
- 万能牌: `wild.png`, `wild_draw_four.png`
- 卡背: `card_back.png`

## 游戏流程

1. **开始游戏**
   - 点击SettingsGame页面的"开始游戏"按钮
   - 游戏界面全屏显示
   - 自动发牌并开始第一回合

2. **玩家回合**
   - 查看手牌，可出的牌会高亮显示
   - 点击选择要出的牌
   - 点击"出牌"按钮确认
   - 如果是万能牌或王牌，需要选择颜色

3. **AI回合**
   - AI自动分析可出的牌
   - 随机选择一张可出的牌
   - 如果没有可出的牌，自动抽牌

4. **游戏结束**
   - 某位玩家出完所有牌
   - 显示胜利/失败消息

## 特殊功能

### 自动重新洗牌

- 当抽牌堆为空时，自动将弃牌堆（除顶牌外）重新洗牌
- 保证游戏可以持续进行

## 游戏启动

在SettingsGame页面中：

1. 找到UNO游戏卡片
2. 点击"开始游戏"按钮
3. 游戏开始！

## 已知问题

- [ ] AI打牌中会情绪崩溃，需要在prompt做出限制
